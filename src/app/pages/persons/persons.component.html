<!-- <app-person *ngFor="let person of persons" [person]="person"></app-person> -->
<ng-container *ngIf="persons.length > 0">
  <div class="persons-table">
    <table mat-table [dataSource]="persons" multiTemplateDataRows>
      <ng-container
        matColumnDef="{{ column }}"
        *ngFor="let column of columnsToDisplay"
      >
        <th mat-header-cell *matHeaderCellDef>{{ column }}</th>
        <td mat-cell *matCellDef="let person">{{ person[column] }}</td>
      </ng-container>

      <!-- boton de expandir -->
      <ng-container matColumnDef="expand">
        <th mat-header-cell *matHeaderCellDef aria-label="row actions">
          &nbsp;
        </th>
        <td mat-cell *matCellDef="let person">
          <button
            mat-icon-button
            aria-label="expand row"
            (click)="
              expandedPerson = expandedPerson === person ? null : person;
              $event.stopPropagation()
            "
          >
            <mat-icon *ngIf="expandedPerson !== person"
              >keyboard_arrow_down</mat-icon
            >
            <mat-icon *ngIf="expandedPerson === person"
              >keyboard_arrow_up</mat-icon
            >
          </button>
        </td>
      </ng-container>

      <!-- Contenido de la fila expandida -->
      <ng-container matColumnDef="expandedDetail">
        <td
          mat-cell
          *matCellDef="let person"
          [attr.colspan]="columnsToDisplayWithExpand.length"
        >
          <div
            class="person-detail"
            [@detailExpand]="
              person == expandedPerson ? 'expanded' : 'collapsed'
            "
          >
            <div class="expanded-person-info">Email: {{ person.email }}</div>
            <div class="expanded-person-info">Phone: {{ person.phone }}</div>
            <div class="expanded-person-info">
              Birthdate: {{ person.birthdate }}
            </div>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnsToDisplayWithExpand"></tr>
      <tr
        mat-row
        *matRowDef="let person; columns: columnsToDisplayWithExpand"
        class="person-row"
        [class.expanded-row]="expandedPerson === person"
        (click)="expandedPerson = expandedPerson === person ? null : person"
      ></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: ['expandedDetail']"
        class="detail-row"
      ></tr>
    </table>
  </div>
</ng-container>
<ng-container *ngIf="persons.length === 0">
  <h1>No persons</h1>
</ng-container>

<mat-card>
  <mat-card-header>
    <mat-card-title>Add a new person</mat-card-title>
  </mat-card-header>
  <form action="" class="person-form">
    <p>
      <mat-form-field>
        <mat-label>D.N.I</mat-label>
        <input type="text" matInput />
      </mat-form-field>
    </p>
    <!-- POSIBILIDAD DE USAR DIV PARA EL RESPONSIVE -->
    <table class="full-name-table" cellSpacing="0">
      <tr>
        <td>
          <mat-form-field>
            <mat-label>First name</mat-label>
            <input type="text" matInput />
          </mat-form-field>
        </td>
        <td>
          <mat-form-field>
            <mat-label>Last name</mat-label>
            <input type="text" matInput />
          </mat-form-field>
        </td>
      </tr>
    </table>
    <p>
      <mat-form-field class="full-Name-table">
        <mat-label>Email</mat-label>
        <input
          type="email"
          matInput
          [formControl]="emailFormControl"
          placeholder="Ex. pat@example.com"
        />
        <mat-error
          *ngIf="
            emailFormControl.hasError('email') &&
            !emailFormControl.hasError('required')
          "
        >
          Please enter a valid email address
        </mat-error>
        <mat-error *ngIf="emailFormControl.hasError('required')">
          Email is <strong>required</strong>
        </mat-error>
      </mat-form-field>
    </p>
    <p>
      <mat-form-field>
        <mat-label>Phone</mat-label>
        <input type="text" matInput />
      </mat-form-field>
    </p>
    <p>
      <mat-form-field>
        <mat-label>Birthdate</mat-label>
        <input matInput [matDatepicker]="picker" />
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle
          matIconSuffix
          [for]="picker"
        ></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
    </p>
  </form>
</mat-card>
